# Servlet

## 1. 软件架构B/S和C/S

- C/S：client客户端/server服务端 基于服务端和客户端的软件架构 凡是C/S必须安装指定的客户端才可以使用

   比如：腾讯会议	钉钉	qq	LOL	WOW

  - 优点：交互性更强，数据安全性更高
  - 缺点：需要下载客户端 大型游戏几十G 客户端需要针对性开发，维护和版本变更非常不灵活

- B/S：browser浏览器/server服务端 基于浏览器和服务器软件架构，只需要按照浏览器即可使用 所有程序都部署在服务器

  比如：拼多多 淘宝 京东 小米 考试系统

  - 优点：使用方便 维护方便，版本变更 成本非常低，分布性非常强
  - 缺点：需要等待浏览器去加载服务器的数据，如果网络不稳定 用户使用这些系统就会出现延迟的问题。数据安全性不强 网络传输数据时 很可能被其他人截取到机密信息 对服务器要求很高

## 2. JSP ---了解

jsp是基于B/S架构的 就是java server pages，就是java服务器页面 就是在传统的html页面中 植入一些java代码，实现页面数据动态的功能

（html+java代码）底层实现还是通过java写出来的（Servlet）

jsp执行原理：jsp页面 ==> 翻译成`*.java` ==> 编译成`*.class` ==> 执行 ==> 返回到浏览器

#### 2.1 jsp常用部分

- 指令：jsp指定整个页面的相关属性	比如：设置编码方式 文档类型 导入相关的包

  - page指令：设置页面的整体属性 比如：编码，一般会写在页面中的第一行

  ```jsp
  <%@page 属性名=属性值 %>
  <%@page contentType="text/html;charset=utf-8" %>
  ```

  - include指令：在jsp中引入其他jsp资源

  ```jsp
  <%@include file="xxx.jsp"  %>
  ```

  - taglib指令：是为了引用外部库资源（核心标签库 格式化标签库 函数库）前提：需要导入一个依赖`JSTL`

  ```jsp
  <%tablib uri="网址" prefix="前缀" %>
  
  <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
  <c:foreach></c:foreach>
  ```

- 脚本和表达式：

```jsp
脚本语言：<% 任意的java代码 %>
表达式语法：<%=表达式%>	输出表达式的结果
```

- 注释：

```jsp
<!-- 只能注释html标签 不可以注册脚本语言 -->
<%-- 注释jsp所有内容 --%>
```

#### 2.2 通过jsp实现注册功能的流程图

![145c4b28caa6726e0d3b9b2244482b55.png](https://s2.loli.net/2024/07/25/TwKluzctb4hQrOj.png)

## 3. Http协议

http协议是超文本传输协议，是一种可以从服务端传输超文本（文本 视频 音频 文件 数据...）传输到本地浏览器的传输协议，说白了就是可以实现服务器和浏览器做数据传递的。是基于request请求和respnse响应的

#### 3.1 Http协议特点 ---了解

- 无连接：每次只会处理一个请求，服务器处理完后自动断开，没有连接这个概念
- 无状态：每次请求都是独立的 不会单独保存请求前后的数据 如果下一个请求还需要之前的数据 需要重新传递 除非可以将数据存储作用域里面或者存储到缓存Cookie
- 灵活：可以传输任何数据 而且传输的内容页 通过content-type设置文档类型来控制

#### 3.2 请求方式 ---面试题

- post请求：用于向服务器提交数据（类似于新增） 通过表单提交的数据 一般都要设置成post请求
- get请求：用于向服务器获取数据（类似于查询） 应用范围最广的 绝大部分请求都是get方式  比如：在浏览器编写网址发送请求，超链接发送请求，通过js，导入css，img导入图片...
- put请求：用于修改服务器数据的（类似于修改）
- delete请求：用于删除服务器数据的（类似于删除）

#### 3.3 get和post请求区别 ---面试题

- 应用场景不同：get用于获取服务器数据的 post用于向服务器提交数据的
- 数据传输方式：get请求将数据在地址栏通过？后面拼接显示出来，post请求属于隐式提交 但是可以查看浏览器控制台 看请求头信息
- 数据传输长度：get请求是在地址栏显示 传输长度会受到浏览器限制而决定大约1-2k左右，post理论上没有长度限制

- 安全性：post相比get方式 更安全，所以说传输一些敏感信息 只能使用post。get方式适合传递不重要的信息
- 上传文件：只能使用post方式

#### 3.4 请求状态码 ---面试题

http状态码用来唯一标识 请求目前处于的状态

- 200：请求成功
- 301：永久请求重定向
- 302：临时请求重定向
- 400：客户端数据异常 前端提交的数据和后端接收的数据 类型不一致 而且也无法转换 "abc" -> int 文件 -> String
- 403：请求被拒绝（没有权限）添加了权限功能
- 404：地址不对，或者 服务器启动编译报错 导致项目没有成功部署，或者 把访问的资源放入WEB-INF里 因为它不能直接访问
- 500：服务器异常

## 4. Servlet ---重点

是springMVC底层核心

Servlet是一段java程序，用于处理前端发送的请求（注册 登录请求）并且同时还可以给浏览器响应结果 类似于之前实现的控制层页面的功能 用于实现控制层（controller）

#### 4.1 Servlet实现方式

- 继承HttpServlet类，重写doGet()	doPost()	doPut()	doDelete
  底层实现其实通过实现Servlet接口封装出来的方法
- 实现Servlet接口 重写一对方法 ---了解Servlet声明周期

#### 4.2 HttpServlet实现步骤

- 继承HttpServlet
- 重写doGet()   doPost() ...
- 配置Servlet（让Servlet真正初始化 实例化）
  - 通过web.xml配置文件 ---推荐
  - 通过@WebServlet注解来配置 ---了解
